#!/usr/bin/env nake
# encoding: utf-8

# Make sure symlinks to this file work.
real_bin_path  = File.symlink?(__FILE__) ? File.readlink(__FILE__) : __FILE__
root_directory = File.expand_path(File.join(File.dirname(real_bin_path), ".."))
lib_directory  = File.join(root_directory, "lib")

# In development environment we want to use ./lib.
unless $LOAD_PATH.include?(lib_directory)
  $LOAD_PATH.unshift(lib_directory)
end

require "nake"
require "apiary/commands/preview"

Nake.verbose = false

Nake.args["-H", "--help"] = lambda do |*|
  puts

  Nake::Task.tasks.each do |name, task|
    puts "#{File.basename(__FILE__)} #{name} # #{task.description}"
  end

  exit
end
